/**
 * Module javascript to place new exceptions.
 *
 * @module   mod_simplemod/notification_newexception
 * @category  Classes - autoloading
 * @copyright 2023, ISYC
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_notificationsagent/notification_newexception",[],(function(){return{init:function(){document.getElementById("id_newconditionexception_button").addEventListener("click",(function(){let newExceptionSelect=document.getElementById("id_newconditionexception_select"),$title=newExceptionSelect.options[newExceptionSelect.selectedIndex].text,$formDefault=[],formNotif=document.querySelector('form[action*="notificationsagent"].mform');Array.from(formNotif.elements).forEach((element=>{element.id&&$formDefault.push("[id]"+element.id+"[/id][value]"+element.value+"[/value]")}));let data={key:"exception",action:"new",title:$title,elements:JSON.parse(newExceptionSelect.value.split(":")[1]),name:newExceptionSelect.options[newExceptionSelect.selectedIndex].value.substring(0,newExceptionSelect.options[newExceptionSelect.selectedIndex].value.indexOf(":[")),formDefault:$formDefault};$.ajax({type:"POST",url:window.location.pathname.substring(0,"/local/notificationsagent/editrule.php"),data:data,success:function(event){"success"===event.state&&window.location.reload()},error:function(XMLHttpRequest,textStatus,errorThrown){console.log("Status: "+textStatus),console.log(errorThrown)},dataType:"json"})}))}}}));

//# sourceMappingURL=notification_newexception.min.js.map