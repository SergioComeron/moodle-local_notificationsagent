/**
 * Module javascript to place conditionactions.
 *
 * @module   mod_simplemod/notification_conditionactions
 * @category  Classes - autoloading
 * @copyright 2023, ISYC
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_notificationsagent/notification_editruleformactions",[],(function(){return{init:function(){document.querySelectorAll("h5>i.icon[id*='_']:not(.disabled)").forEach((function(button){button.addEventListener("click",(function(event){let $typesection=event.target.id.split("_")[0].replace(/[0-9]/g,""),$actionelement=event.target.id.split("_")[1],$keyelementsession=parseInt(event.target.id.replace($typesection,"").replace("_remove","")),$formDefault=[],formNotif=document.querySelector('form[action*="notificationsagent"].mform'),idSectionRemove="";Array.from(formNotif.elements).forEach((element=>{if(element.id){var elementID=element.id,keySection=elementID.split("_"+$typesection).pop().split("_")[0];element.id.includes("_"+$typesection)&&idSectionRemove&&idSectionRemove<keySection&&(elementID=element.id.replace($typesection+keySection,$typesection+(keySection-1))),element.id.includes($typesection+($keyelementsession+1))?idSectionRemove=$keyelementsession+1:$formDefault.push("[id]"+elementID+"[/id][value]"+element.value+"[/value]")}}));let data={key:$typesection,action:$actionelement,keyelementsession:$keyelementsession,formDefault:$formDefault};"conditionexception"===data.key&&(data.key=data.key.replace(/condition/,"")),$.ajax({type:"POST",url:window.location.pathname.substring(0,"/local/notificationsagent/editrule.php"),data:data,success:function(event){"success"===event.state&&window.location.reload()},error:function(XMLHttpRequest,textStatus,errorThrown){console.log("Status: "+textStatus),console.log(errorThrown)},dataType:"json"})}))}))}}}));

//# sourceMappingURL=notification_editruleformactions.min.js.map