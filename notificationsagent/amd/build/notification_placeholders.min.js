/**
 * Module javascript to place the placeholders.
 * Modified version of IOMAD Email template emailvars.
 *
 * @module   mod_simplemod/notification_placeholders
 * @category  Classes - autoloading
 * @copyright 2023, ISYC
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_notificationsagent/notification_placeholders",[],(function(){return{init:function(){for(var module=this,clickforword=document.getElementsByClassName("clickforword"),i=0;i<clickforword.length;i++)clickforword[i].addEventListener("click",(function(e){e.preventDefault();var idAction=e.target.closest("div.notificationvars").getAttribute("id").replace("notificationvars","");module.insertAtCaret("{"+this.getAttribute("data-text")+"}",idAction)}))},insertAtCaret:function(myValue,idAction){var sel,range;if("None"===window.getSelection().type||void 0===$(window.getSelection().baseNode).closest("[id^='id_'][id*='"+idAction+"'][id$='editable']").attr("id")&&void 0===$(window.getSelection().focusNode).closest("[id^='id_'][id*='"+idAction+"'][id$='editable']").attr("id"))document.querySelectorAll("[id^='id_'][id*='"+idAction+"'][id$='editable']")[0].appendChild(document.createTextNode(myValue));else if((sel=window.getSelection()).getRangeAt&&sel.rangeCount){(range=sel.getRangeAt(0)).deleteContents(),range.insertNode(document.createTextNode(myValue));for(let position=0;position!=myValue.length+1;position++)sel.modify("move","right","character")}}}}));

//# sourceMappingURL=notification_placeholders.min.js.map