{"version":3,"file":"sort_rule_cards.min.js","sources":["../../src/rule/sort_rule_cards.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n// Project implemented by the \\\"Recovery, Transformation and Resilience Plan.\n// Funded by the European Union - Next GenerationEU\\\".\n//\n// Produced by the UNIMOODLE University Group: Universities of\n// Valladolid, Complutense de Madrid, UPV/EHU, León, Salamanca,\n// Illes Balears, Valencia, Rey Juan Carlos, La Laguna, Zaragoza, Málaga,\n// Córdoba, Extremadura, Vigo, Las Palmas de Gran Canaria y Burgos.\n\n/**\n * Version details\n *\n * @package    local_notificationsagent\n * @copyright  2023 Proyecto UNIMOODLE\n * @author     UNIMOODLE Group (Coordinator) <direccion.area.estrategia.digital@uva.es>\n * @author     ISYC <soporte@isyc.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {saveOrderSession} from 'local_notificationsagent/rule/repository';\n\n/**\n * Selectors for the sort select options.\n *\n * @property {string} sortButtonId The element ID of the Sort Rule button.\n * @property {string} selectOptionId The element ID of the Sort select Rule option.\n */\nconst selectors = {\n    sortButtonId: 'applyordergroupbtn',\n    selectOptionId: 'orderrulesid'\n};\n\n\n/**\n * Initialises the Sort rules Rule module.\n *\n * @method init\n */\nexport const init = async () => {\n    await getOrderSession();\n    saveOrderSessionId();\n};\n\n\n/**\n * \n * Save key rule ordenation.\n * \n */\nconst saveOrderSessionId = async() => {\n    let buttonapplysort = document.getElementById(selectors.sortButtonId);\n    let urlparams = new URLSearchParams(window.location.search);\n    let courseid = null;\n    if (urlparams.has('courseid')) {\n        courseid = urlparams.get('courseid');\n    }\n\n\n    buttonapplysort.addEventListener('click', async() => {\n        let orderid = document.getElementById(selectors.selectOptionId).value;\n        let sessionname = 'orderid';\n        response = await saveOrderSession(sessionname, orderid, courseid);\n        location.reload();\n    });\n\n};\n\n\n/**\n * \n * Save key rule ordenation.\n * \n */\nconst getOrderSession = async() => {\n        let orderid = -1;\n        let sessionname = 'orderid';\n        let urlparams = new URLSearchParams(window.location.search);\n        let courseid = null;\n        if (urlparams.has('courseid')) {\n            courseid = urlparams.get('courseid');\n        }\n        response = await saveOrderSession(sessionname, orderid, courseid);\n        if (response.orderid != -1) {\n            let select = document.getElementById('orderrulesid');\n                let array = [];\n                select.options.forEach((element) => {\n                    array.push(element.value);\n                });\n                if (array.includes(response.orderid.toString())) {\n                    select.value = response.orderid;\n                } else {\n                    select.value = array[0];\n                }\n        }\n\n};\n\n\n"],"names":["selectors","async","getOrderSession","saveOrderSessionId","buttonapplysort","document","getElementById","urlparams","URLSearchParams","window","location","search","courseid","has","get","addEventListener","orderid","value","response","reload","select","array","options","forEach","element","push","includes","toString"],"mappings":";;;;;;;;;;MAwCMA,uBACY,qBADZA,yBAEc,6BASAC,gBACVC,kBACNC,4BASEA,mBAAqBF,cACnBG,gBAAkBC,SAASC,eAAeN,wBAC1CO,UAAY,IAAIC,gBAAgBC,OAAOC,SAASC,QAChDC,SAAW,KACXL,UAAUM,IAAI,cACdD,SAAWL,UAAUO,IAAI,aAI7BV,gBAAgBW,iBAAiB,SAASd,cAClCe,QAAUX,SAASC,eAAeN,0BAA0BiB,MAEhEC,eAAiB,gCADC,UAC6BF,QAASJ,UACxDF,SAASS,aAWXjB,gBAAkBD,cAGZM,UAAY,IAAIC,gBAAgBC,OAAOC,SAASC,QAChDC,SAAW,QACXL,UAAUM,IAAI,cACdD,SAAWL,UAAUO,IAAI,aAE7BI,eAAiB,gCANC,WADH,EAOyCN,WAC/B,GAArBM,SAASF,QAAe,KACpBI,OAASf,SAASC,eAAe,gBAC7Be,MAAQ,GACZD,OAAOE,QAAQC,SAASC,UACpBH,MAAMI,KAAKD,QAAQP,UAEnBI,MAAMK,SAASR,SAASF,QAAQW,YAChCP,OAAOH,MAAQC,SAASF,QAExBI,OAAOH,MAAQI,MAAM"}